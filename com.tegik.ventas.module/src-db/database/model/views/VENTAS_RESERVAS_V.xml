<?xml version="1.0"?>
  <database name="VIEW VENTAS_RESERVAS_V">
    <view name="VENTAS_RESERVAS_V"><![CDATA[SELECT  CASE WHEN COALESCE(asi.em_almac_ingresado, 'N') = 'Y' THEN sd.m_storage_detail_id ELSE pl.compra_packinglist_id END AS ventas_reservas_v_id, asi.ad_client_id, asi.ad_org_id, asi.createdby, asi.updatedby, asi.created, asi.updated, asi.isactive, asi.em_almac_prefijo AS prefijo, asi.em_almac_numero AS numero, asi.em_ventas_pickexecute_id AS ventas_pickexecute_id,  CASE WHEN COALESCE(asi.em_almac_ingresado, 'N') = 'Y' THEN sd.qtyonhand ELSE pl.quantity END AS cantidad,  CASE WHEN COALESCE(asi.em_almac_ingresado, 'N') = 'Y' THEN sd.m_product_id ELSE pl.m_product_id END AS m_product_id,  CASE WHEN COALESCE(asi.em_almac_ingresado, 'N') = 'Y' THEN wh.m_warehouse_id ELSE pl.m_warehouse_id END AS m_warehouse_id,  CASE WHEN COALESCE(asi.em_almac_ingresado, 'N') = 'Y' THEN 'ALMACENADO' ELSE 'TRANSITO' END AS tipo, asi.m_attributesetinstance_id, 'N' AS ob_selected FROM (SELECT m_attributesetinstance.m_attributesetinstance_id, m_attributesetinstance.em_ventas_pickexecute_id, m_attributesetinstance.em_almac_ingresado, m_attributesetinstance.ad_client_id, m_attributesetinstance.ad_org_id, m_attributesetinstance.isactive, m_attributesetinstance.created, m_attributesetinstance.createdby, m_attributesetinstance.updated, m_attributesetinstance.updatedby, m_attributesetinstance.em_almac_prefijo, m_attributesetinstance.em_almac_numero FROM m_attributesetinstance WHERE m_attributesetinstance.em_ventas_pickexecute_id IS NOT NULL) asi LEFT JOIN (SELECT m_storage_detail.m_storage_detail_id, m_storage_detail.m_product_id, m_storage_detail.m_attributesetinstance_id, m_storage_detail.m_locator_id, m_storage_detail.qtyonhand FROM m_storage_detail WHERE m_storage_detail.m_attributesetinstance_id <> '0' AND m_storage_detail.ad_client_id = '0BD13E24E0F94596B61414BD72225EB8') sd ON sd.m_attributesetinstance_id = asi.m_attributesetinstance_id LEFT JOIN m_locator l ON l.m_locator_id = sd.m_locator_id LEFT JOIN m_warehouse wh ON wh.m_warehouse_id = l.m_warehouse_id LEFT JOIN (SELECT pl.m_attributesetinstance_id, pl.compra_packinglist_id, pl.quantity, pl.m_product_id, c.m_warehouse_id, c.compra_contenedor_id FROM compra_packinglist pl JOIN compra_contenedor c ON pl.compra_contenedor_id = c.compra_contenedor_id) pl ON pl.m_attributesetinstance_id = asi.m_attributesetinstance_id WHERE  CASE WHEN COALESCE(asi.em_almac_ingresado, 'N') = 'Y' THEN sd.m_storage_detail_id ELSE pl.compra_packinglist_id END IS NOT NULL]]></view>
  </database>
