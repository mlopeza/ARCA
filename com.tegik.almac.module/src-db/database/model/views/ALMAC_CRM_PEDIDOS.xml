<?xml version="1.0"?>
  <database name="VIEW ALMAC_CRM_PEDIDOS">
    <view name="ALMAC_CRM_PEDIDOS"><![CDATA[SELECT iol.m_inoutline_id AS almac_crm_pedidos_id, io.m_inout_id, io.documentno AS salida, iol.ad_client_id, iol.ad_org_id, iol.created, iol.createdby, iol.updated, iol.updatedby, iol.isactive, iol.m_attributesetinstance_id, asi.em_almac_prefijo AS prefijo, asi.em_almac_numero AS numero, ac.name AS calidad,  CASE WHEN upper(btrim(p.em_dmprod_tileoslab)) = 'TILE' THEN COALESCE(p.em_dmprod_height, 0) ELSE COALESCE(asi.em_almac_alto, 0) END AS alto,  CASE WHEN upper(btrim(p.em_dmprod_tileoslab)) = 'TILE' THEN COALESCE(p.em_dmprod_width, 0) ELSE COALESCE(asi.em_almac_ancho, 0) END AS ancho, p.em_dmprod_depth AS espesor, p.em_almac_p_revisado AS revisado, iol.movementqty AS cantidad_enviada,  CASE WHEN upper(btrim(p.em_dmprod_tileoslab)) = 'TILE' THEN COALESCE(p.em_dmprod_width, 0) * COALESCE(p.em_dmprod_height, 0) * iol.movementqty ELSE COALESCE(asi.em_almac_ancho, 0) * COALESCE(asi.em_almac_alto, 0) * iol.movementqty END AS m2, p.m_product_id, p.name AS nombre_comercial, p.sku AS sku_arca, p.value AS sku, w.name AS almacen, w.m_warehouse_id, cc.documentno AS contenedor, pe.ventas_pickexecute_id, pe.pedido_cotizacion, COALESCE(pe.accion, 'ND') AS accion, pe.created AS pedido_fecha_mobiik, asi.em_almac_flete AS flete_mobiik, asi.em_almac_flete_fecha AS flete_fecha, asi.em_almac_anden AS anden_mobiik FROM (SELECT m_inout.m_inout_id, m_inout.ad_client_id, m_inout.ad_org_id, m_inout.isactive, m_inout.created, m_inout.createdby, m_inout.updated, m_inout.updatedby, m_inout.issotrx, m_inout.documentno, m_inout.docaction, m_inout.docstatus, m_inout.posted, m_inout.processing, m_inout.processed, m_inout.c_doctype_id, m_inout.description, m_inout.c_order_id, m_inout.dateordered, m_inout.isprinted, m_inout.movementtype, m_inout.movementdate, m_inout.dateacct, m_inout.c_bpartner_id, m_inout.c_bpartner_location_id, m_inout.m_warehouse_id, m_inout.poreference, m_inout.deliveryrule, m_inout.freightcostrule, m_inout.freightamt, m_inout.deliveryviarule, m_inout.m_shipper_id, m_inout.c_charge_id, m_inout.chargeamt, m_inout.priorityrule, m_inout.dateprinted, m_inout.c_invoice_id, m_inout.createfrom, m_inout.generateto, m_inout.ad_user_id, m_inout.salesrep_id, m_inout.nopackages, m_inout.pickdate, m_inout.shipdate, m_inout.trackingno, m_inout.ad_orgtrx_id, m_inout.c_project_id, m_inout.c_campaign_id, m_inout.c_activity_id, m_inout.user1_id, m_inout.user2_id, m_inout.updatelines, m_inout.islogistic, m_inout.generatelines, m_inout.calculate_freight, m_inout.delivery_location_id, m_inout.m_freightcategory_id, m_inout.freight_currency_id, m_inout.rm_receipt_pickedit, m_inout.rm_shipment_pickedit, m_inout.m_condition_goods_id, m_inout.em_almac_m2total, m_inout.em_almac_placastotal, m_inout.em_almac_numpedido, m_inout.em_almac_numfactura, m_inout.em_almac_lineaspedido, m_inout.em_almac_m_shipper_id, m_inout.em_almac_m_freight_id, m_inout.em_almac_actcosto, m_inout.em_almac_ventas_pick_id, m_inout.em_almac_matricula, m_inout.em_almac_num_entrega, m_inout.em_almac_nomb_chofer, m_inout.em_compra_crearlineas, m_inout.em_compra_contenedor_id, m_inout.em_compra_compterr_id, m_inout.em_compra_isnacional, m_inout.em_compra_contenedordf_id, m_inout.em_compra_copiarpick, m_inout.em_ventas_bp_id, m_inout.em_ventas_facturar, m_inout.em_ventas_pricelist_id, m_inout.em_ventas_pricelist, m_inout.em_almac_truckton_id, m_inout.em_almac_truckline_id FROM m_inout WHERE m_inout.em_almac_ventas_pick_id IS NOT NULL AND m_inout.issotrx = 'Y' AND m_inout.movementtype = 'C-') io JOIN ventas_pickexecute pe ON io.em_almac_ventas_pick_id = pe.ventas_pickexecute_id AND pe.description LIKE '%Front End' LEFT JOIN m_warehouse w ON w.m_warehouse_id = io.m_warehouse_id LEFT JOIN m_inoutline iol ON iol.m_inout_id = io.m_inout_id LEFT JOIN m_locator loc ON loc.m_locator_id = iol.m_locator_id LEFT JOIN m_product p ON p.m_product_id = iol.m_product_id LEFT JOIN m_attributesetinstance asi ON asi.m_attributesetinstance_id = iol.m_attributesetinstance_id LEFT JOIN almac_calidad_p ac ON ac.almac_calidad_p_id = asi.em_almac_calidad_p_id LEFT JOIN compra_contenedor cc ON cc.compra_contenedor_id = asi.em_almac_com_contenedor_id]]></view>
  </database>
